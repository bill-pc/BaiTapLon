<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Product Card/Page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../css/info_foodfish.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
</head>

<body>

    <div class="card-wrapper">
        <div class="card">
            <!-- card left -->
            <div class="product-imgs">
                <div class="img-display">
                    <div class="img-showcase">
                        <img src="../img/fishfood.png" alt="shoe image">
                    </div>
                </div>
            </div>
            <!-- card right -->
            <div class="product-content">
                <h2 class="product-title">BIOLINE NUTRILIAN</h2>
                <a href="../html/Trang chủ.html" class="product-link">visit Yummy pet</a>
                <div class="product-rating">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star-half-alt"></i>
                    <span>4.8(21) </span>
                </div>

                <div class="product-price">
                    <p class="price">Price: <span>280.000đ</span></p>
                </div>

                <div class="product-detail">
                    <h2>Chi tiết sản phẩm: </h2>
                    <p>Lợi ích chính BIOLINE NUTRILIAN với nguồn nguyên liệu tươi ngon và đảm bảo, mang lại cho thú cưng những giá trị dinh dưỡng thật nhất. </p>
                    <p>Thành phần dinh dưỡng Thức ăn hạt mềm cho cá vị thịt gà BIOLINE NUTRILIAN với công thức từ thịt gà tươi mang lại cho thú cưng những giá trị dinh dưỡng tốt nhất.</p>
                    <ul>


                        <li>Loại: <span>Hạt ăn dinh dưỡng</span></li>
                        <li>Shipping: <span>Toàn Quốc</span></li>
                        <li>Phí ship: <span>Free</span></li>
                    </ul>
                </div>

                <div class="purchase-info">
                    <input type="number" min="0" value="1" max="15" class="input">
                    <button type="button" class="btn">
              Thêm vào giỏ hàng <i class = "fas fa-shopping-cart"></i>
            </button>

                </div>

                <div class="social-links">
                    <p>Share At: </p>
                    <a href="#">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="#">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="#">
                        <i class="fab fa-youtube"></i>
                    </a>
                    <a href="#">
                        <i class="fab fa-tiktok"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <!-- sản phẩm liên quan-->
    <div class="container">
        <div class="row mt-5">
            <div class="col-md-3">
                <h4 class="title">Sản phẩm liên quan</h4>
            </div>
            <div class="col-7"></div>
            <div class="col-md-2">
                <div class="title text-end mt-2">
                    <a class="text-decoration-none" href="../html/Thức ăn cá.html">Xem tất cả >></a>
                </div>
            </div>
        </div>
        <hr>
        <!-- product row 1 -->
        <div class="row row-cols-2 row-cols-md-4 g-4 mt-4">
            <div class="col">
                <div class="card">
                    <a href="../html/info_fooddog.html"><img src="../img/dogfood.png" class="card-img-top" alt="..."></a>
                    <div class="card-body">
                        <p class="card-text">Thức ăn cho chó con vị thịt gà PURINA PRO PLAN Kitten..</p>
                        <div class="d-flex justify-content-between text-secondary ">
                            <p>4.8 <i class="fa-solid fa-star"></i></p>
                            <p>Lượt bán: 1.2k</p>
                        </div>
                        <div class="row">
                            <div class="col-6">
                                <p class="price_f">280.000đ</p>
                            </div>
                            <div class="col-2"></div>
                            <div class="col-4" id="icon-shopping">
                                <button type="submit"><i class="fa-solid fa-cart-shopping"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card">
                    <a href="../html/info_foodmouse.html"><img src="../img/mousefood.png" class="card-img-top" alt="..."></a>
                    <div class="card-body">
                        <p class="card-text">Thức ăn cho chuột vị thịt gà PURINA PRO PLAN Kitten.</p>
                        <div class="d-flex justify-content-between text-secondary ">
                            <p>4.8 <i class="fa-solid fa-star"></i></p>
                            <p>Lượt bán: 1.2k</p>
                        </div>
                        <div class="row">
                            <div class="col-6">
                                <p class="price_f">280.000đ</p>
                            </div>
                            <div class="col-2"></div>
                            <div class="col-4" id="icon-shopping">
                                <button type="submit"><i class="fa-solid fa-cart-shopping"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card">
                    <a href="../html/info_foodbird.html"><img src="../img/birdfood.png" class="card-img-top" alt="..."></a>
                    <div class="card-body">
                        <p class="card-text">Thức ăn cho chim vị thịt gà PURINA PRO PLAN Kitten..</p>
                        <div class="d-flex justify-content-between text-secondary ">
                            <p>4.8 <i class="fa-solid fa-star"></i></p>
                            <p>Lượt bán: 1.2k</p>
                        </div>
                        <div class="row">
                            <div class="col-6">
                                <p class="price_f">280.000đ</p>
                            </div>
                            <div class="col-2"></div>
                            <div class="col-4" id="icon-shopping">
                                <button type="submit"><i class="fa-solid fa-cart-shopping"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card">
                    <a href="../html/info_foodcat.html"><img src="../img/catfood.png" class="card-img-top" alt="..."></a>
                    <div class="card-body">
                        <p class="card-text">Thức ăn cho mèo con vị thịt gà PURINA PRO PLAN Kitten..</p>
                        <div class="d-flex justify-content-between text-secondary ">
                            <p>4.8 <i class="fa-solid fa-star"></i></p>
                            <p>Lượt bán: 1.2k</p>
                        </div>
                        <div class="row">
                            <div class="col-6">
                                <p class="price_f">280.000đ</p>
                            </div>
                            <div class="col-2"></div>
                            <div class="col-4" id="icon-shopping">
                                <button type="submit"><i class="fa-solid fa-cart-shopping"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Nút "Thêm vào giỏ hàng" cho sản phẩm chính
                const addToCartBtn = document.querySelector('.btn');
                if (addToCartBtn) {
                    addToCartBtn.addEventListener('click', addToCart);
                }

                // Nút "Thêm vào giỏ hàng" cho các sản phẩm liên quan
                const relatedProductBtns = document.querySelectorAll('.card button[type="submit"]');
                relatedProductBtns.forEach(btn => {
                    btn.addEventListener('click', addToCart);
                });

                function addToCart(event) {
                    // Lấy thông tin sản phẩm
                    let productTitle, productPrice, productImage, quantity;

                    // Kiểm tra nếu là sản phẩm chính hay sản phẩm liên quan
                    if (event.target.closest('.product-content')) {
                        productTitle = document.querySelector('.product-title').innerText;
                        productPrice = document.querySelector('.product-price span').innerText;
                        productImage = '../img/fishfood.png'; // Hình ảnh cố định cho sản phẩm chính
                        quantity = document.querySelector('.input').value;
                    } else {
                        const productCard = event.target.closest('.card-body');
                        productTitle = productCard.querySelector('.card-text').innerText;
                        productPrice = productCard.querySelector('.price_f').innerText;
                        productImage = '../img/fishfood.png'; // Hình ảnh cố định cho sản phẩm liên quan
                        quantity = 1; // Mặc định là 1 sản phẩm cho sản phẩm liên quan
                    }

                    // Kiểm tra nếu số lượng hợp lệ
                    if (quantity > 0) {
                        // Loại bỏ ký tự không phải số trong giá sản phẩm
                        const priceNumber = parseInt(productPrice.replace(/[^\d]/g, ''));


                        if (!isNaN(priceNumber)) {
                            // Tạo đối tượng sản phẩm
                            const product = {
                                title: productTitle,
                                price: priceNumber,
                                image: productImage,
                                quantity: quantity
                            };

                            // Kiểm tra giỏ hàng trong localStorage
                            let cart = JSON.parse(localStorage.getItem('cart')) || [];

                            // Kiểm tra nếu sản phẩm đã có trong giỏ hàng
                            const existingProductIndex = cart.findIndex(item => item.title === productTitle);

                            if (existingProductIndex !== -1) {
                                // Nếu sản phẩm đã có, cập nhật số lượng
                                cart[existingProductIndex].quantity = parseInt(cart[existingProductIndex].quantity) + parseInt(quantity);
                            } else {
                                // Nếu sản phẩm chưa có, thêm sản phẩm mới vào giỏ hàng
                                cart.push(product);
                            }

                            // Lưu lại giỏ hàng vào localStorage
                            localStorage.setItem('cart', JSON.stringify(cart));

                            // Thông báo cho người dùng
                            alert(`${quantity} sản phẩm "${productTitle}" đã được thêm vào giỏ hàng!`);
                        } else {
                            alert('Giá sản phẩm không hợp lệ!');
                        }
                    } else {
                        alert('Vui lòng nhập số lượng sản phẩm!');
                    }
                }
            });
        </script>
        <script src="../js/info_food.js"></script>


</body>

</html>